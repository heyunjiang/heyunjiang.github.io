## 背景

项目属于微信网页，进入网页时，使用 `fetch` 进行后台数据获取，由于需要判断用户信息，所以使用 `fetch` 进行数据获取时，没有能够成功，保存在服务器上的 `session` 无法判断。

## 原因

还好之前读过这篇文章： [ajax vs fetch](https://segmentfault.com/a/1190000003810652)

里面讲到了： 

> Fetch 常见坑: 
> 
>> Fetch 请求默认是不带 cookie 的，需要设置 fetch(url,{credentials: 'include'})
>>
服务器返回 400，500 错误码时并不会 reject，只有网络错误这些导致请求不能完成时，fetch 才会被 reject。

原来fetch是不带cookie上传的，所以本次会话信息服务器不能识别。所以，fetch适合用于无状态数据交互，这样才能体现出它的有点。

## 解决办法

将 `fetch` 换成 `ajax` ，这里我使用的是 `axios`。