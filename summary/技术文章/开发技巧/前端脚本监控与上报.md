### 起因

大二下做阿里笔试时，有一题让做浏览器错误监控并上报，当时就只会用window.onerror，并且内部参数都不熟悉，gg了。

### 实现原理

**预料之中的错误**： 采用try catch进行包裹，监听错误信息。

**预料之外的错误**： 采用window.onerror进行监听。

### 上报

1. 采用ajax数据交互
2. 采用图片加载： new Image(url?msg=msg);

### 错误处理

巨统计，上报错误最多的是script error，原因是同源策略，需要设置允许同源即可，或者忽略这个错误。

## 示例代码

```

window.onerror = function (msg, url, row, col, error) {
    console.log('onerror 错误信息 ↙');
    console.log({
        msg,  url,  row, col, error
    })
};

test;

```
或

```

try {
    setTimeout(function() {
        test // <- throw error 异步错误
    },0)
} catch(e){
    console.log('异步错误信息 ↙');
    console.log(e);
}

```